
``` python
import pandas as pd
import statsmodels.formula.api as smf
import statsmodels.api as sm
import polars as pl
from marginaleffects import comparisons
pl.Config.set_tbl_formatting("ASCII_FULL")
df = sm.datasets.get_rdataset("Guerry", "HistData").data
mod = smf.ols("Literacy ~ Pop1831 * Desertion", df)
fit = mod.fit()

comparisons(fit, "Pop1831", value = 1, comparison = "differenceavg")
```

<small>shape: (1, 5)</small>

| estimate | std_error | statistic | conf_low  | conf_high |
|----------|-----------|-----------|-----------|-----------|
| f64      | f64       | f64       | f64       | f64       |
| 0.003717 | 0.011597  | 0.320485  | -0.019353 | 0.026786  |


``` python
comparisons(fit, "Pop1831", value = 1, comparison = "difference")
```

<small>shape: (86, 28)</small>

| estimate  | std_error | statistic | conf_low  | conf_high | dept | Region | Department       | Crime_pers | Crime_prop | Literacy | Donations | Infants | Suicides | MainCity | Wealth | Commerce | Clergy | Crime_parents | Infanticide | Donation_clergy | Lottery | Desertion | Instruction | Prostitutes | Distance | Area | Pop1831 |
|-----------|-----------|-----------|-----------|-----------|------|--------|------------------|------------|------------|----------|-----------|---------|----------|----------|--------|----------|--------|---------------|-------------|-----------------|---------|-----------|-------------|-------------|----------|------|---------|
| f64       | f64       | f64       | f64       | f64       | i64  | str    | str              | i64        | i64        | i64      | i64       | i64     | i64      | str      | i64    | i64      | i64    | i64           | i64         | i64             | i64     | i64       | i64         | i64         | f64      | i64  | f64     |
| -0.009946 | 0.013663  | -0.727936 | -0.037126 | 0.017234  | 1    | "E"    | "Ain"            | 28870      | 15890      | 37       | 5098      | 33120   | 35039    | "2:Med"  | 73     | 58       | 11     | 71            | 60          | 69              | 41      | 55        | 46          | 13          | 218.372  | 5762 | 346.03  |
| -0.042023 | 0.025143  | -1.671333 | -0.092041 | 0.007995  | 2    | "N"    | "Aisne"          | 26226      | 5521       | 51       | 8901      | 14572   | 12831    | "2:Med"  | 22     | 10       | 82     | 4             | 82          | 36              | 38      | 82        | 24          | 327         | 65.945   | 7369 | 513.0   |
| 0.036388  | 0.018517  | 1.965047  | -0.000449 | 0.073225  | 3    | "C"    | "Allier"         | 26747      | 7925       | 13       | 10973     | 17044   | 114121   | "2:Med"  | 61     | 66       | 68     | 46            | 42          | 76              | 66      | 16        | 85          | 34          | 161.927  | 7340 | 298.26  |
| 0.017379  | 0.012825  | 1.355129  | -0.008133 | 0.042891  | 4    | "E"    | "Basses-Alpes"   | 12935      | 7289       | 46       | 2733      | 23018   | 14238    | "1:Sm"   | 76     | 49       | 5      | 70            | 12          | 37              | 80      | 32        | 29          | 2           | 351.399  | 6925 | 155.9   |
| 0.013815  | 0.012195  | 1.132804  | -0.010445 | 0.038075  | 5    | "E"    | "Hautes-Alpes"   | 17488      | 8174       | 69       | 6962      | 23076   | 16171    | "1:Sm"   | 83     | 65       | 10     | 22            | 23          | 64              | 79      | 35        | 7           | 1           | 320.28   | 5549 | 129.1   |
| 0.032824  | 0.017243  | 1.903577  | -0.001478 | 0.067125  | 7    | "S"    | "Ardeche"        | 9474       | 10263      | 27       | 3188      | 42117   | 52547    | "1:Sm"   | 84     | 1        | 28     | 76            | 47          | 67              | 70      | 19        | 62          | 1           | 279.413  | 5529 | 340.73  |
| -0.018262 | 0.016084  | -1.135445 | -0.050258 | 0.013733  | 8    | "N"    | "Ardennes"       | 35203      | 8847       | 67       | 6400      | 16106   | 26198    | "2:Med"  | 33     | 4        | 50     | 53            | 85          | 49              | 31      | 62        | 9           | 83          | 105.694  | 5229 | 289.62  |
| 0.029259  | 0.016042  | 1.823871  | -0.002654 | 0.061173  | 9    | "S"    | "Ariege"         | 6173       | 9597       | 18       | 3542      | 22916   | 123625   | "1:Sm"   | 72     | 60       | 39     | 74            | 28          | 63              | 75      | 22        | 77          | 3           | 385.313  | 4890 | 253.12  |
| -0.046775 | 0.027142  | -1.723315 | -0.10077  | 0.00722   | 10   | "E"    | "Aube"           | 19602      | 4086       | 59       | 3608      | 18642   | 10989    | "2:Med"  | 14     | 3        | 42     | 77            | 54          | 9               | 28      | 86        | 15          | 207         | 83.244   | 6004 | 246.36  |
| -0.01945  | 0.016476  | -1.18052  | -0.052226 | 0.013326  | 11   | "S"    | "Aude"           | 15647      | 10431      | 34       | 2582      | 20225   | 66498    | "2:Med"  | 17     | 35       | 15     | 80            | 35          | 27              | 50      | 63        | 48          | 1           | 370.949  | 6139 | 270.13  |
| 0.043516  | 0.021232  | 2.049526  | 0.001278  | 0.085753  | 12   | "S"    | "Aveyron"        | 8236       | 6731       | 31       | 3211      | 21981   | 116671   | "2:Med"  | 50     | 70       | 3      | 51            | 5           | 23              | 81      | 10        | 44          | 4           | 296.089  | 8735 | 359.06  |
| 0.028071  | 0.015661  | 1.792459  | -0.003083 | 0.059226  | 13   | "S"    | "Bouches-du-Rho… | 13409      | 5291       | 38       | 2314      | 9325    | 8107     | "3:Lg"   | 2      | 26       | 30     | 45            | 74          | 55              | 3       | 23        | 43          | 25          | 362.568  | 5087 | 359.47  |
| …         | …         | …         | …         | …         | …    | …      | …                | …          | …          | …        | …         | …       | …        | …        | …      | …        | …      | …             | …           | …               | …       | …         | …           | …           | …        | …    | …       |
| -0.044399 | 0.026138  | -1.698621 | -0.096396 | 0.007598  | 79   | "W"    | "Deux-Sevres"    | 18400      | 6863       | 41       | 16956     | 25461   | 24533    | "2:Med"  | 39     | 59       | 72     | 30            | 4           | 85              | 71      | 84        | 39          | 6           | 188.474  | 5999 | 297.85  |
| -0.039647 | 0.024159  | -1.641086 | -0.087706 | 0.008413  | 80   | "N"    | "Somme"          | 33592      | 7144       | 44       | 4964      | 12447   | 12836    | "2:Med"  | 21     | 36       | 48     | 7             | 64          | 33              | 30      | 80        | 34          | 302         | 69.52    | 6170 | 543.7   |
| 0.0352    | 0.018085  | 1.946294  | -0.000778 | 0.071177  | 81   | "S"    | "Tarn"           | 13019      | 6241       | 20       | 3449      | 29305   | 68980    | "2:Med"  | 47     | 44       | 14     | 13            | 9           | 47              | 67      | 17        | 73          | 3           | 328.146  | 5758 | 333.84  |
| 0.009063  | 0.01168   | 0.775894  | -0.014173 | 0.032299  | 82   | "S"    | "Tarn-et-Garonn… | 14790      | 8680       | 25       | 4558      | 23771   | 48317    | "2:Med"  | 29     | 50       | 29     | 66            | 41          | 52              | 64      | 39        | 64          | 4           | 313.09   | 3718 | 242.51  |
| -0.006382 | 0.012851  | -0.496605 | -0.031946 | 0.019182  | 83   | "S"    | "Var"            | 13145      | 9572       | 23       | 2449      | 14800   | 13380    | "2:Med"  | 43     | 39       | 61     | 55            | 49          | 40              | 26      | 52        | 69          | 6           | 389.512  | 5973 | 317.5   |
| 0.006687  | 0.011576  | 0.577613  | -0.016343 | 0.029716  | 84   | "S"    | "Vaucluse"       | 13576      | 5731       | 37       | 1246      | 17239   | 19024    | "2:Med"  | 64     | 28       | 78     | 61            | 76          | 54              | 8       | 41        | 45          | 2           | 337.215  | 3567 | 239.11  |
| -0.038459 | 0.023671  | -1.624721 | -0.085548 | 0.00863   | 85   | "W"    | "Vendee"         | 20827      | 7566       | 28       | 14035     | 62486   | 67963    | "1:Sm"   | 56     | 64       | 70     | 50            | 44          | 30              | 68      | 79        | 59          | 4           | 212.459  | 6720 | 330.36  |
| 0.010251  | 0.011772  | 0.870798  | -0.013167 | 0.033669  | 86   | "W"    | "Vienne"         | 15010      | 4710       | 25       | 8922      | 35224   | 21851    | "2:Med"  | 68     | 43       | 71     | 20            | 1           | 44              | 40      | 38        | 65          | 18          | 170.523  | 6990 | 282.73  |
| 0.042328  | 0.020767  | 2.038207  | 0.001015  | 0.08364   | 87   | "C"    | "Haute-Vienne"   | 16256      | 6402       | 13       | 13817     | 19940   | 33497    | "2:Med"  | 67     | 63       | 76     | 68            | 6           | 78              | 55      | 11        | 84          | 7           | 198.874  | 5520 | 285.13  |
| -0.045587 | 0.026639  | -1.711271 | -0.098581 | 0.007407  | 88   | "E"    | "Vosges"         | 18835      | 9044       | 62       | 4040      | 14978   | 33029    | "2:Med"  | 82     | 42       | 51     | 58            | 34          | 5               | 14      | 85        | 11          | 43          | 174.477  | 5874 | 397.99  |
| -0.023014 | 0.017706  | -1.299805 | -0.058237 | 0.012208  | 89   | "C"    | "Yonne"          | 18006      | 6516       | 47       | 4276      | 16616   | 12789    | "2:Med"  | 30     | 15       | 55     | 32            | 22          | 35              | 51      | 66        | 27          | 272         | 81.797   | 7427 | 352.49  |
| 0.044704  | 0.021702  | 2.059896  | 0.001532  | 0.087876  | 200  | null   | "Corse"          | 2199       | 4589       | 49       | 37015     | 24743   | 37016    | "2:Med"  | 37     | 83       | 1      | 81            | 2           | 84              | 83      | 9         | 25          | 1           | 539.213  | 8680 | 195.41  |

